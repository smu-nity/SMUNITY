{% extends 'base.html' %}
{% load static %}
{% block css %}
    <link rel="stylesheet" href="{% static 'css/head.css' %}">
{% endblock %}
{% block main_area %}
    <div class="bg_wrapper">
        <!-- ë©”ì¸ -->
        <header class="main_bg">
            <!-- ì†Œê°œ ë¬¸êµ¬ -->
            <div class="bg_text_btn">
                <div class="bg_small_text fadein_text" style="letter-spacing:1px;">
                    ìƒëª…ëŒ€ ì¡¸ì—…ìš”ê±´ ê²€ì‚¬ ì‚¬ì´íŠ¸
                </div>
                <div class="bg_big_text fadein_text" style="letter-spacing:8px;">
                    SMUNITY
                </div>
                <div class="bg_btn">
                    <button class="bg_btn_style" onclick="location.href={% url 'core:mypage' %}">ê²€ì‚¬í•˜ê¸°</button>
                </div>
            </div>
            <!-- ë°©ë¬¸ì + ê²€ì‚¬íšŸìˆ˜ -->
            <div class="num_visit card">
                <div>
                    <i class="fas fa-calendar-day"></i>&nbsp;&nbsp;ì˜¤ëŠ˜ ë°©ë¬¸ì ìˆ˜ : {{visit_today}}
                </div>
                <div style="margin-top:0.4rem;">
                    <i class="fas fa-mouse" style="margin-right:0.1rem;"></i>&nbsp;&nbsp;ì´ ë°©ë¬¸ì ìˆ˜ : {{visit_total}}
                </div>
                <div style="margin-top:0.4rem;">
                    <i class="fas fa-user"></i>&nbsp;&nbsp;ì´ íšŒì› ìˆ˜ : {{user_num}}
                </div>
            </div>
        </header>
    </div>
    <!-- ì—…ë°ì´íŠ¸ ê³µì§€ -->
    <div id='myModal' class="modal" style="display: none;">
        <div class="modal-content">
            <span id='dd' class="close" style="font-size:3rem;">&times;</span>
            <div class='popup_content'>
                <div class='popup_title'>
                    ê³µì§€ì‚¬í•­
                </div>
                <div class='popup_box'>
                    <ul>
                        ğŸ“¢ ì•ˆë…•í•˜ì„¸ìš”! ìƒëª…ëŒ€í•™êµ ì»´í“¨í„°ê³¼í•™ê³¼ í•™ìƒë“¤ë¡œ êµ¬ì„±ëœ ê°œë°œíŒ€ <a class="link_site" href="{% url 'team' %}">ìŠ¤ë®¤ë‹ˆí‹°</a> ì…ë‹ˆë‹¤.<br><br>

                        ë¨¼ì €, ì €í¬ê°€ ê°œë°œí•œ ì¡¸ì—…ìš”ê±´ ê²€ì‚¬ ì‚¬ì´íŠ¸ì— ë§ì€ ê´€ì‹¬ ê°€ì ¸ì£¼ì…”ì„œ ê°ì‚¬í•©ë‹ˆë‹¤.<br><br>

                        ìƒëª…ëŒ€í•™êµ í•™ìš° ì—¬ëŸ¬ë¶„ë“¤ì˜ ëœ¨ê±°ìš´ ì„±ì›ì— ë³´ë‹µí•˜ê³ ì ì´ë²ˆì— ì¡¸ì—…ìš”ê±´ ì‚¬ì´íŠ¸ë¥¼ ì—…ë°ì´íŠ¸ í•˜ì˜€ìŠµë‹ˆë‹¤.<br><br>

                        ì´ë²ˆ 2023í•™ë…„ë„ 2í•™ê¸° ìˆ˜ê°•ì‹ ì²­ ë¿ë§Œ ì•„ë‹ˆë¼ ì•ìœ¼ë¡œ í•™ìš° ì—¬ëŸ¬ë¶„ë“¤ì˜ ì»¤ë¦¬í˜ëŸ¼ ì„¤ê³„ì—ì„œ ì €í¬ ìŠ¤ë®¤ë‹ˆí‹°ì™€ í•¨ê»˜í•´ ì£¼ì‹œë©´ ì •ë§ ê°ì‚¬ë“œë¦¬ê² ìŠµë‹ˆë‹¤. ğŸ”¥<br><br>

                        í•™ìš° ì—¬ëŸ¬ë¶„ë“¤ì´ ë” í¸ë¦¬í•˜ê²Œ ì‚¬ìš©í•  ìˆ˜ ìˆëŠ” ì„œë¹„ìŠ¤ë¥¼ ëª©í‘œë¡œ ì•ìœ¼ë¡œ ë” ë°œì „í•˜ëŠ” <a class="link_site" href="{% url 'team' %}">ìŠ¤ë®¤ë‹ˆí‹°</a> ê°€ ë˜ê² ìŠµë‹ˆë‹¤. ğŸ™‡ğŸ»â€â™‚ï¸ <br>
                        ê°ì‚¬í•©ë‹ˆë‹¤!
                        <hr style='border: 0.001px solid rgb(230, 230, 230); margin:1rem 0 1rem 0; width:85%'>
                        <li>
                            <b>ì„œë¹„ìŠ¤ ëŒ€ìƒ í•™ê³¼ ë° í•™ë²ˆ</b>&nbsp;&nbsp;
                            <a id='target_btn' class="link_site" style='cursor: pointer;'>ê²€ì‚¬ëŒ€ìƒí‘œ</a>
                        </li>
                        <li>
                            <b>version 1.1.2 ì—…ë°ì´íŠ¸ ë‚´ìš©</b>&nbsp;&nbsp;
                            <a class="link_site" target="_blank" href="https://github.com/hyunmin0317/smunity/blob/master/version.md">ë²„ì „ ê¸°ë¡ ë³´ê¸°</a>
                        </li>
                        <li style="margin-left:1.2rem; font-size:1rem;">
                            2023í•™ë…„ë„ 2í•™ê¸° ê°•ì˜ì‹œê°„í‘œ ë° êµìœ¡ê³¼ì • ë°˜ì˜
                        </li>
                        <li style="margin-left:1.2rem; font-size:1rem;">
                            ì§€ëŠ¥Â·ë°ì´í„°ìœµí•©í•™ë¶€ íšŒì›ê°€ì… ì˜¤ë¥˜ ìˆ˜ì •
                        </li>
                        <li style="margin-left:1.2rem; font-size:1rem;">
                            íŠ¹ë³„í•™ê¸° ê³¼ëª© ì¶”ê°€
                        </li>
                    </ul>
                </div>
                <div class="popup_check">
                    <label style='cursor:pointer'>
                        <input id='unlook' type="checkbox" style='width:1rem; height:1rem;'>
                        <label for='unlook'></label>
                        &nbsp;ë‹¤ìŒ ê³µì§€ê¹Œì§€ ë³´ì§€ ì•Šê¸°
                    </label>

                </div>
            </div>
        </div>
    </div>

    <!-- ê²€ì‚¬ëŒ€ìƒí‘œ ëª¨ë‹¬ -->
    <div id="target_modal" class="modal" style="display: none;">
        <div class="modal-content" style="width:70%">
            <span class="close" id="target_close">&times;</span>
            <br>
            <div class="modal_div">
                <div class="p_div">
                    <!-- ì¶”ì²œê³¼ëª© -->
                    <div style="font-size : 1.5rem;"><i class="my_i fas fa-check-circle"></i> ê²€ì‚¬ëŒ€ìƒí‘œ
                    </div>
                    <div class="mydiv">ì•„ë˜ í‘œì— í•´ë‹¹í•˜ëŠ” í•™ê³¼ë§Œ íšŒì›ê°€ì… ê°€ëŠ¥í•©ë‹ˆë‹¤.</div>
                    <hr>

                    <div class='target_num_div'>
                        í˜„ì¬ ì´ <span class='target_color_span'>{{ dept_num }}</span>ê°œ í•™ê³¼ ê²€ì‚¬ ê°€ëŠ¥
                    </div>

                    <table class="target_table" style="width: 100%;">
                        <tr>
                            <th class="target_table_th" style='border-left: 1px solid #dadada;'>í•™ê³¼</th>
                            <th class="target_table_th">ë‹¨ê³¼ëŒ€í•™</th>
                            <th class="target_table_th">í•™ë²ˆ</th>
                            <th class="target_table_th">êµìœ¡ê³¼ì •</th>
                        </tr>
                        {% for department in departments %}
                        <tr>
                            <td class="target_table_td" style='border-left: 1px solid #dadada;'>{{ department.name }}</td>
                            <td class="target_table_td">{{ department.college }}</td>
                            <td class="target_table_td" >23, 22, 21, 20, 19, 18, 17</td>
                            <td class="target_table_td" ><a class="link_site" href="{{ department.url }}" target="_blank">êµìœ¡ê³¼ì •</a></td>
                        </tr>
                        {% endfor %}
                    </table>
                </div>
            </div>
        </div>
    </div>
{% endblock %}
{% block js %}
    <script src="{% static 'js/modal.js' %}"></script>

    <script>
    // ì¿ í‚¤ ì—¬ë¶€ì— ë”°ë¼ ëª¨ë‹¬ì°½ ë Œë”ë§
    const cookie_name = '23.08.03';
    var unlook_cookie = document.cookie.match('(^|;) ?' + cookie_name + '=([^;]*)(;|$)');
    if (unlook_cookie == null) {
        document.getElementById('myModal').style.display = 'block';
    }

    // ëª¨ë‹¬ ì°½ ë„ê¸° + ë‹¤ì‹œ ë³´ì§€ ì•ŠìŒ ì¿ í‚¤ ì„¤ì •
    var Spanclick_set_cookie = function (x, y) {
        x.onclick = function () {
            y.style.display = "none";
            var chk = document.getElementById('unlook');
            // ì²´í¬í•˜ê³  ëˆ„ë¥´ë©´ ì¿ í‚¤ ìƒì„±
            if (chk.checked) {
                var date = new Date();
                date.setTime(date.getTime() + 60 * 24 * 60 * 60 * 1000);
                document.cookie = cookie_name + '=' + 'unlook' + ';expires=' + date.toUTCString() + ';path=/';
            }
        }
    }
    window.onclick = function (event) {
        if (event.target == modal) {
            modal.style.display = "none";
        }
    }

    var modal = document.getElementById('myModal');
    var span = document.getElementsByClassName("close")[0];

    Spanclick_set_cookie(span, modal);

    // ê²€ì‚¬ëŒ€ìƒí‘œ ëª¨ë‹¬
    var target_btn = document.getElementById("target_btn");
    var target_modal = document.getElementById('target_modal');
    var target_close = document.getElementById("target_close");
    Btnclick(target_btn, target_modal);
    Spanclick(target_close, target_modal);
    window.onclick = function (event) {
        if (event.target == target_modal) {
            target_modal.style.display = "none";
        }
    }
</script>
{% endblock %}
